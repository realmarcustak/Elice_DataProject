{"ast":null,"code":"import _slicedToArray from\"/Users/taghyochang/Documents/7teamdatafront/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as S from\"./ShelterMap.style\";import React,{useEffect,useState}from\"react\";import{useShelter}from\"../../hooks\";import{Modal}from\"../shelterlist/mapModal\";// import { Link } from \"react-router-dom\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _window=window,kakao=_window.kakao;export var ShelterMap=function ShelterMap(){//λ°μ΄ν„° λ°›μ•„μ¤κΈ°\nvar _useShelter=useShelter(),shelter=_useShelter.shelter;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalOpen=_useState2[0],setModalOpen=_useState2[1];useEffect(function(){var mapContainer=document.getElementById(\"map\");// μ§€λ„λ¥Ό ν‘μ‹ν•  div\nvar mapOption={center:new kakao.maps.LatLng(37.550229,126.977279),// μ§€λ„μ μ¤‘μ‹¬μΆν‘=μ„μ‹λ΅ λ‚¨μ‚°νƒ€μ›\nlevel:5// μ§€λ„μ ν™•λ€ λ λ²¨\n};// μ§€λ„λ¥Ό ν‘μ‹ν•  divμ™€ μ§€λ„ μµμ…μΌλ΅  μ§€λ„λ¥Ό μƒμ„±\nvar map=new kakao.maps.Map(mapContainer,mapOption);// λ§μ»¤\nvar positions=shelter.map(function(shelter){return{title:shelter.shelterNm,type:shelter.shelterType,address:shelter.address,qty:shelter.qty,latlng:new kakao.maps.LatLng(shelter.yCord,shelter.xCord)};});// λ§μ»¤ μ΄λ―Έμ§€μ μ΄λ―Έμ§€ μ£Όμ†μ…λ‹λ‹¤\nvar imageSrc=\"https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png\";var _loop=function _loop(){// λ§μ»¤ μ΄λ―Έμ§€μ μ΄λ―Έμ§€ ν¬κΈ° μ…λ‹λ‹¤\nvar imageSize=new kakao.maps.Size(24,35);// λ§μ»¤ μ΄λ―Έμ§€λ¥Ό μƒμ„±ν•©λ‹λ‹¤\nvar markerImage=new kakao.maps.MarkerImage(imageSrc,imageSize);var markerParams={map:map,// λ§μ»¤λ¥Ό ν‘μ‹ν•  μ§€λ„\nposition:positions[i].latlng,// λ§μ»¤λ¥Ό ν‘μ‹ν•  μ„μΉ\ntitle:positions[i].title,// λ§μ»¤μ νƒ€μ΄ν‹€, λ§μ»¤μ— λ§μ°μ¤λ¥Ό μ¬λ¦¬λ©΄ νƒ€μ΄ν‹€μ΄ ν‘μ‹λ©λ‹λ‹¤\ntype:positions[i].type,address:positions[i].address,qty:positions[i].qty,image:markerImage,// λ§μ»¤ μ΄λ―Έμ§€\nclickable:true};// λ§μ»¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤\nvar marker=new kakao.maps.Marker(markerParams);// λ§μ»¤λ¥Ό μ§€λ„μ— ν‘μ‹ν•©λ‹λ‹¤.\nmarker.setMap(map);//π€π€π€π€π€ λ§μ»¤λ¥Ό ν΄λ¦­ μ‹ μΈν¬μλ„μ°\nvar iwContent=positions[i].title,// μΈν¬μλ„μ°μ— ν‘μ¶λ  λ‚΄μ©μΌλ΅ HTML λ¬Έμμ—΄μ΄λ‚ document elementκ°€ κ°€λ¥ν•©λ‹λ‹¤\niwRemoveable=true;// removeable μ†μ„±μ„ ture λ΅ μ„¤μ •ν•λ©΄ μΈν¬μλ„μ°λ¥Ό λ‹«μ„ μ μλ” xλ²„νΌμ΄ ν‘μ‹λ©λ‹λ‹¤\n// μΈν¬μλ„μ°λ¥Ό μƒμ„±ν•©λ‹λ‹¤\nvar infowindow=new kakao.maps.InfoWindow({content:iwContent,removable:iwRemoveable});// λ§μ»¤μ— ν΄λ¦­μ΄λ²¤νΈλ¥Ό λ“±λ΅ν•©λ‹λ‹¤\nkakao.maps.event.addListener(marker,\"click\",function(){setModalOpen({open:true,data:{marker:marker,markerParams:markerParams}});infowindow.open(map,marker);});};for(var i=0;i<positions.length;i++){_loop();}},[shelter]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(S.Map,{id:\"map\"}),modalOpen.open&&/*#__PURE__*/_jsx(Modal,{mapName:modalOpen.data,setModalOpen:setModalOpen})]});};","map":{"version":3,"names":["S","React","useEffect","useState","useShelter","Modal","jsx","_jsx","jsxs","_jsxs","_window","window","kakao","ShelterMap","_useShelter","shelter","_useState","_useState2","_slicedToArray","modalOpen","setModalOpen","mapContainer","document","getElementById","mapOption","center","maps","LatLng","level","map","Map","positions","title","shelterNm","type","shelterType","address","qty","latlng","yCord","xCord","imageSrc","_loop","imageSize","Size","markerImage","MarkerImage","markerParams","position","i","image","clickable","marker","Marker","setMap","iwContent","iwRemoveable","infowindow","InfoWindow","content","removable","event","addListener","open","data","length","Fragment","children","id","mapName"],"sources":["/Users/taghyochang/Documents/7teamdatafront/front/src/components/sheltermap/ShelterMap.js"],"sourcesContent":["import * as S from \"./ShelterMap.style\";\nimport React, { useEffect, useState } from \"react\";\nimport { useShelter } from \"../../hooks\";\nimport { Modal } from \"../shelterlist/mapModal\";\n// import { Link } from \"react-router-dom\";\nconst { kakao } = window;\n\nexport const ShelterMap = () => {\n  //λ°μ΄ν„° λ°›μ•„μ¤κΈ°\n  const { shelter } = useShelter();\n  const [modalOpen, setModalOpen] = useState(false);\n\n  useEffect(() => {\n    const mapContainer = document.getElementById(\"map\"); // μ§€λ„λ¥Ό ν‘μ‹ν•  div\n    const mapOption = {\n      center: new kakao.maps.LatLng(37.550229, 126.977279), // μ§€λ„μ μ¤‘μ‹¬μΆν‘=μ„μ‹λ΅ λ‚¨μ‚°νƒ€μ›\n      level: 5, // μ§€λ„μ ν™•λ€ λ λ²¨\n    };\n    // μ§€λ„λ¥Ό ν‘μ‹ν•  divμ™€ μ§€λ„ μµμ…μΌλ΅  μ§€λ„λ¥Ό μƒμ„±\n    const map = new kakao.maps.Map(mapContainer, mapOption);\n\n    // λ§μ»¤\n    const positions = shelter.map((shelter) => {\n      return {\n        title: shelter.shelterNm,\n        type: shelter.shelterType,\n        address: shelter.address,\n        qty: shelter.qty,\n        latlng: new kakao.maps.LatLng(shelter.yCord, shelter.xCord),\n      };\n    });\n\n    // λ§μ»¤ μ΄λ―Έμ§€μ μ΄λ―Έμ§€ μ£Όμ†μ…λ‹λ‹¤\n    const imageSrc = \"https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png\";\n\n    for (var i = 0; i < positions.length; i++) {\n      // λ§μ»¤ μ΄λ―Έμ§€μ μ΄λ―Έμ§€ ν¬κΈ° μ…λ‹λ‹¤\n      const imageSize = new kakao.maps.Size(24, 35);\n\n      // λ§μ»¤ μ΄λ―Έμ§€λ¥Ό μƒμ„±ν•©λ‹λ‹¤\n      const markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);\n\n      const markerParams = {\n        map: map, // λ§μ»¤λ¥Ό ν‘μ‹ν•  μ§€λ„\n        position: positions[i].latlng, // λ§μ»¤λ¥Ό ν‘μ‹ν•  μ„μΉ\n        title: positions[i].title, // λ§μ»¤μ νƒ€μ΄ν‹€, λ§μ»¤μ— λ§μ°μ¤λ¥Ό μ¬λ¦¬λ©΄ νƒ€μ΄ν‹€μ΄ ν‘μ‹λ©λ‹λ‹¤\n        type: positions[i].type,\n        address: positions[i].address,\n        qty: positions[i].qty,\n        image: markerImage, // λ§μ»¤ μ΄λ―Έμ§€\n        clickable: true,\n      };\n      // λ§μ»¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤\n      const marker = new kakao.maps.Marker(markerParams);\n      // λ§μ»¤λ¥Ό μ§€λ„μ— ν‘μ‹ν•©λ‹λ‹¤.\n      marker.setMap(map);\n\n      //π€π€π€π€π€ λ§μ»¤λ¥Ό ν΄λ¦­ μ‹ μΈν¬μλ„μ°\n      const iwContent = positions[i].title,\n        // μΈν¬μλ„μ°μ— ν‘μ¶λ  λ‚΄μ©μΌλ΅ HTML λ¬Έμμ—΄μ΄λ‚ document elementκ°€ κ°€λ¥ν•©λ‹λ‹¤\n        iwRemoveable = true; // removeable μ†μ„±μ„ ture λ΅ μ„¤μ •ν•λ©΄ μΈν¬μλ„μ°λ¥Ό λ‹«μ„ μ μλ” xλ²„νΌμ΄ ν‘μ‹λ©λ‹λ‹¤\n      // μΈν¬μλ„μ°λ¥Ό μƒμ„±ν•©λ‹λ‹¤\n      const infowindow = new kakao.maps.InfoWindow({\n        content: iwContent,\n        removable: iwRemoveable,\n      });\n\n      // λ§μ»¤μ— ν΄λ¦­μ΄λ²¤νΈλ¥Ό λ“±λ΅ν•©λ‹λ‹¤\n      kakao.maps.event.addListener(marker, \"click\", function () {\n        setModalOpen({\n          open: true,\n          data: { marker, markerParams },\n        });\n        infowindow.open(map, marker);\n      });\n    }\n  }, [shelter]);\n\n  return (\n    <React.Fragment>\n      <S.Map id=\"map\" />\n      {modalOpen.open && <Modal mapName={modalOpen.data} setModalOpen={setModalOpen} />}\n    </React.Fragment>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}